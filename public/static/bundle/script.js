(()=>{"use strict";var t,i=function(){function t(t,i,e,o,n){void 0===e&&(e=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=this;this.width=0,this.height=0,this.row=0,this.col=0,this.x=0,this.y=0,this.z=0,this.render=function(t){t.save(),t.translate(r.x,r.y-r.z),r.draw(t),t.restore()},this.width=t,this.height=i,this.x=e,this.y=o,this.z=n}return t.prototype.draw=function(t){var i=Math.round(this.width/2),e=Math.round(this.height/2);t.strokeStyle="#3b3b3b",t.fillStyle="green",t.beginPath(),t.moveTo(i,0),t.lineTo(0,e),t.lineTo(i,this.height),t.lineTo(this.width,e),t.lineTo(i,0),t.stroke(),t.fill(),t.closePath()},t}(),e=function(){function t(t,i,e,o){this.tiles=[],this.rows=0,this.cols=0,this.x=0,this.y=0,this.rows=t,this.cols=i,this.x=e,this.y=o}return t.prototype.calcPos=function(t,i,e){t.row=i,t.col=e,t.x=32*(e-i),t.y=16*(e+i)},t.prototype.reset=function(){this.tiles=[];for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++){var o=new i(64,32);this.calcPos(o,t,e),this.tiles.push(o)}},t.prototype.getTileAt=function(t,i){return this.tiles.find((function(e){return e.row===t&&e.col===i}))},t.prototype.setTileAt=function(t,i,e){var o=this.getTileAt(i,e);if(null!=o){var n=this.tiles.indexOf(o);this.tiles.splice(n,1)}this.calcPos(t,i,e),this.tiles.push(t)},t.prototype.render=function(t){t.save(),t.translate(this.x,this.y),this.tiles.forEach((function(i){i.render(t)})),t.restore()},t}(),o=(t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)},function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.texture=null,i}return o(i,t),i.prototype.draw=function(t){if(null!==this.texture){var i=this.texture.naturalHeight;t.drawImage(this.texture,0,-i>>1)}},i}(i),r=function(){function t(t,i,o,n){this.canvas=t,this.ctx=i,this.canvas.width=o,this.canvas.height=n,this.map=new e(30,30,928,0)}return t.prototype.start=function(){var t=new n(64,32);t.texture=document.querySelector("#player"),this.map.reset(),this.map.setTileAt(t,4,16),this.tick(),this.gameLoop()},t.prototype.movePlayer=function(t,i){t.x-=Math.round(8*Math.random())-2,t.y+=Math.round(8*Math.random())-2},t.prototype.tick=function(t){var i=this;void 0===t&&(t=0);var e=this.map.getTileAt(4,16);this.movePlayer(e,t),this.ctx.clearRect(0,0,1920,1080),this.map.render(this.ctx),setTimeout((function(){i.tick(t+1)}),100)},t.prototype.gameLoop=function(){var t=this;requestAnimationFrame((function(){return t.gameLoop()}))},t}();window.addEventListener("load",(function(){var t=document.getElementById("canvas"),i=t.getContext("2d");new r(t,i,1920,1080).start()}))})();